!function(root,factory){"function"==typeof define&&define.amd?define(["stratus","underscore","angular"],factory):factory(root.Stratus,root._,root.angular)}(this,function(Stratus,_,angular){Stratus.Components.Delete={bindings:{ngModel:"=",elementId:"@",versionEntity:"@",showDateTimePicker:"@",showUnpublish:"@",showVersionHistory:"@",redirect:"@"},controller:function($scope,$element,$parse,$attrs){Stratus.Instances[_.uniqueId("delete_")]=$scope,$scope.model=$scope.$parent.model,$scope.versionEntity=$attrs.versionEntity||null,console.log("setup publish controller",$scope.model,$scope.versionEntity),$scope.version=null,$scope.versionEntity&&!$scope.model.has($scope.versionEntity)&&($scope.version=$scope.model.get($scope.versionEntity),console.log("version",$scope.version)),$scope.elementId=$attrs.elementId||"delete",$scope.showDataTimePicker=$attrs.versionEntity||null,$scope.showUnpublish=$attrs.showUnpublish||!1,$scope.showVersionHistory=$attrs.showVersionHistory||!1,$scope.showMore=!!($scope.showDateTimePicker||$scope.showUnpublish||$scope.showVersionHistory),$scope.redirect=$attrs.redirect||!1,$scope.setDelete=function(time){$scope.model.set("status",-1),$scope.model.save()},$scope.timePublish="",$scope.$watch("timePublish",$scope.setTimePublish(Math.floor((new Date).getTime()/1e3)))},template:'<md-button ng-if="model.id" aria-label="Delete" id="{{ elementId }}" class="btn btnDelete" ng-click="setDelete()"><div class="btnGradientLight"></div><md-icon class="deleteIcon" md-svg-src="/Api/Resource?path=@SitetheoryCoreBundle:images/icons/actionButtons/delete.svg"></md-icon><span class="deleteText">Delete</span></md-button>'}});