!function(e,t){"function"==typeof define&&define.amd?define(["stratus","underscore","angular","stratus.services.registry","stratus.services.details","stratus.services.utility"],t):t(e.Stratus,e._,e.angular)}(this,function(e,t,i){e.Services.VisualSelector=["$provide",function(e){e.factory("visualSelector",["$q","$http","$mdPanel","Registry","details","utility",function(e,s,n,o,a,l){return{zoomviewDialog:function(e,t,s){e[s]=t;var o=n.newPanelPosition().absolute().center(),a={attachTo:i.element(document.body),scope:e,controller:["mdPanelRef",function(t){e.closeDialog=function(){t.close()}}],templateUrl:s+".html",hasBackdrop:!0,panelClass:"media-dialog",position:o,trapFocus:!0,zIndex:150,clickOutsideToClose:!0,escapeToClose:!1,focusOnOpen:!0};n.open(a)},selectTheme:function(e){return l.sendRequest(e,"POST","/Api/Site")},fetchCollection:function(e,s,n,l){e.registry=new o;var r={target:s.type||l,id:null,manifest:!1,decouple:!0,selectedid:s.selectedid,property:s.property,api:{options:{},limit:t.isJSON(s.limit)?JSON.parse(s.limit):n}};return e.api&&i.isObject(e.api)&&(r.api=t.extendDeep(r.api,e.api)),e.registry.fetch(r,e),e.selectedDetails=new a,e.selectedDetails.fetch(r,e),e}}}])}]});