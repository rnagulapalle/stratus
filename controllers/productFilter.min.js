!function(root,factory){"function"==typeof define&&define.amd?define(["stratus","underscore","angular","stratus.services.utility"],factory):factory(root.Stratus,root._,root.angular)}(this,function(Stratus,_,angular){Stratus.Controllers.ProductFilter=["$scope","$log","utility",function($scope,$log,utility){function filter(type,data){delete $scope.collection.meta.get("api").options,Number.isFinite($scope.minPrice)&&Number.isFinite($scope.maxPrice)&&$scope.minPrice<=$scope.maxPrice?($scope.collection.meta.set("api.options.minPrice",$scope.minPrice),$scope.collection.meta.set("api.options.maxPrice",$scope.maxPrice)):Number.isFinite($scope.minPrice)&&$scope.minPrice>=0?$scope.collection.meta.set("api.options.minPrice",$scope.minPrice):Number.isFinite($scope.maxPrice)&&$scope.maxPrice>=0&&$scope.collection.meta.set("api.options.maxPrice",$scope.maxPrice),$scope.collection.meta.set("api.options.filterStatus",$scope.showOnly),$scope.collection.fetch()}Stratus.Instances[_.uniqueId("product_filter_")]=$scope,$scope.Stratus=Stratus,$scope._=_,$scope.showOnly=[],$scope.status=[{desc:"Active",value:1},{desc:"Inactive",value:0}],$scope.minPrice=$scope.maxPrice=null,$scope.billingIncrementOptions={i:"Minutely",h:"Hourly",d:"Daily",w:"Weekly",m:"Monthly",q:"Quarterly",y:"Yearly"},$scope.toggle=function(value){var index=$scope.showOnly.indexOf(value);-1!==index?$scope.showOnly.splice(index,1):$scope.showOnly.push(value),filter()},$scope.$watchCollection("[minPrice, maxPrice]",function(newVal,oldVal){Number.isFinite($scope.minPrice)&&Number.isFinite($scope.maxPrice)&&$scope.minPrice>$scope.maxPrice||filter()}),$scope.safeMessage=function(message){return utility.safeMessage(message)}}]});