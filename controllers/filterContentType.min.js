!function(root,factory){"function"==typeof define&&define.amd?define(["stratus","underscore","angular"],factory):factory(root.Stratus,root._,root.angular)}(this,function(Stratus,_,angular){Stratus.Controllers.FilterContentType=["$scope","$element","$mdToast","$log","$http","$parse",function($scope,$element,$mdToast,$log,$http,$parse){Stratus.Instances[_.uniqueId("filter_content_type_")]=$scope,$scope.Stratus=Stratus,$scope._=_,$scope.contents=[],$scope.contentTypes=[],$scope.showOnly=[],$scope.meta=[],$scope.more=!1,$scope.$watch("collection.models",function(models){models&&models.length>0&&($scope.contents=$scope.data.contents=models)}),$scope.$watch("collection.meta.attributes.usedContentTypes",function(contentType){contentType&&contentType.length>0&&($scope.contentTypes=contentType)}),$scope.$watch("collection.meta",function(meta){meta&&($scope.meta=meta)}),$scope.toggle=function(contentType){var index=$scope.showOnly.findIndex(function(x){return x.value===contentType.value});-1!==index?$scope.showOnly.splice(index,1):$scope.showOnly.push(contentType),$scope.meta.set("api.options.contentType",$scope.showOnly.map(function(item){return item.value})),$scope.collection.fetch().then(function(response){console.log("response",response)})},$scope.moreFilter=function(){$scope.more=!$scope.more}}]});